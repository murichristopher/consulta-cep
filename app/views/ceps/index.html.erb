<div class="min-h-screen bg-base-200 flex items-center justify-center p-4" data-controller="cep">
  <div class="card w-full max-w-md bg-base-100 shadow-xl">
    <div class="card-body">
      <h2 class="card-title justify-center text-2xl mb-4">
        <%= t('ceps.index.search_title') %>
      </h2>

      <%= form_with url: ceps_path, method: :get, local: true, data: { action: "submit->cep#validate" } do |f| %>
        <div class="form-control">
          <label class="label">
            <span class="label-text"><%= t('ceps.index.enter_cep') %></span>
          </label>
          <%= f.text_field :cep,
                class: "input input-bordered",
                placeholder: t('ceps.index.placeholder'),
                data: { cep_target: "input", action: "input->cep#format" },
                pattern: "\\d{5}-?\\d{3}",
                maxlength: 9 %>
        </div>
        <div class="form-control mt-6">
          <%= f.submit t('ceps.index.search_button'), class: "btn btn-primary" %>
        </div>
      <% end %>

      <% if @address.present? %>
        <div class="divider my-6"><%= t('ceps.index.result') %></div>
        <div class="text-center space-y-2">
          <p class="text-xl font-bold"><%= @address[:cep] %></p>
          <p class="text-lg"><strong><%= t('ceps.index.address') %>:</strong> <%= @address[:street] %></p>
          <p class="text-lg"><strong><%= t('ceps.index.district') %>:</strong> <%= @address[:district] %></p>
          <p class="text-lg"><strong><%= t('ceps.index.city') %>:</strong> <%= @address[:city] %></p>
          <p class="text-lg"><strong><%= t('ceps.index.state') %>:</strong> <%= @address[:state] %></p>
          <p class="text-lg"><strong><%= t('ceps.index.ddd') %>:</strong> <%= @address[:ddd] %></p>
        </div>
      <% elsif @error %>
        <div class="alert alert-error shadow-lg mt-4">
          <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 stroke-current flex-shrink-0" fill="none" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 8v4m0 4h.01M5.07 19h13.86C19.27 19 20 18.27 20 17.38V6.62C20 5.73 19.27 5 18.07 5H5.93C4.73 5 4 5.73 4 6.62v10.76C4 18.27 4.73 19 5.93 19z"/>
            </svg>
            <span class="ml-2"><%= @error %></span>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>